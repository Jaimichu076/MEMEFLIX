<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Login - Memeflix</title>
  <link rel="stylesheet" href="css/main.css">
</head>
<body>
  <canvas id="matrix"></canvas>
  <header class="navbar page-layer">
    <div class="logo">MEMEFLIX</div>
    <button class="menu-toggle" aria-label="Abrir menú">☰</button>
    <nav><ul class="nav-links"><li><a href="index.html">Inicio</a></li></ul></nav>
    <div class="nav-right page-layer"><div class="usuario"></div></div>
  </header>

  <main class="page-layer">
    <section style="padding:120px 16px 40px">
      <div class="form-card container">
        <h2 style="color:var(--accent-red);margin-top:0">Inicia sesión en Memeflix</h2>
        <form id="loginForm">
          <input id="usuario" type="text" placeholder="Usuario" required>
          <input id="password" type="password" placeholder="Contraseña" required>
          <button class="btn" type="submit">Entrar</button>
        </form>
      </div>
    </section>
  </main>

  <script src="js/matrix.js"></script>
  <script src="js/main.js"></script>
  <script>
    document.getElementById('loginForm').addEventListener('submit', e=>{
      e.preventDefault();
      const usuario = document.getElementById('usuario').value.trim();
      const password = document.getElementById('password').value.trim();
      if(!usuario || !password) return;
      localStorage.setItem('usuarioMemeflix', usuario);
      // registrar en usuariosSet
      const raw = localStorage.getItem('usuariosSet');
      const arr = raw ? JSON.parse(raw) : [];
      if(!arr.includes(usuario)) arr.push(usuario);
      localStorage.setItem('usuariosSet', JSON.stringify(arr));
      // ranking inicial
      const top = JSON.parse(localStorage.getItem('topUsuarios') || '[]');
      if(!top.find(u=>u.nombre===usuario)) { top.push({nombre:usuario,memes:0}); localStorage.setItem('topUsuarios', JSON.stringify(top)); }
      window.location.href = 'home.html';
    });
  </script>
</body>
</html>


